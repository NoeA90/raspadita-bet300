<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BET300 Â· Rasca y Gana</title>
<meta name="theme-color" content="#0b0f1e"/>
<style>
:root{
  --bg:#0b0f1e; --panel:#121634; --panel2:#0f1330; --border:#1e2150;
  --text:#e8ebff; --muted:#b7b9d6; --ok:#25D366; --pointer:#22d3ee;
  --shadow:0 12px 28px rgba(0,0,0,.45);
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;color:var(--text);background:var(--bg);font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto}
body::before{content:"";position:fixed;inset:0;z-index:-2;background:
  radial-gradient(900px 500px at 50% -10%, rgba(255,215,106,.25), transparent),
  radial-gradient(700px 350px at 100% 0%, rgba(124,77,255,.18), transparent),
  linear-gradient(180deg,#0b0f1e 0%,#0b0f1e 60%,#0a0d20 100%);
}
.container{max-width:980px;margin:10px auto;padding:0 10px 84px}
@media(max-width:420px){.container{padding:0 8px 78px;margin:6px auto}}
.card{background:linear-gradient(180deg, rgba(255, 215, 106, .06), rgba(0,0,0,0)), var(--panel2);
  border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
@media(max-width:420px){.card{border-radius:12px;padding:12px}}

.head{display:flex;align-items:center;gap:10px;margin-bottom:8px;flex-wrap:wrap}
.brand{height:28px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.4))}
.pill{background:linear-gradient(90deg,rgba(255,212,96,.15),rgba(124,77,255,.15));border:1px solid var(--border);
  border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted)}
@media(max-width:420px){.pill{padding:4px 8px;font-size:11px}}
.pill.time{display:flex;gap:8px;align-items:center}
.pill.sound{cursor:pointer;user-select:none}
.count{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border-radius:999px;background:rgba(255,204,0,.15);
  border:1px solid rgba(255,204,0,.35);color:#ffe27a;font-weight:700;font-variant-numeric:tabular-nums}

.grid{display:grid;gap:16px;grid-template-columns:1.1fr .9fr}
@media(max-width:900px){.grid{grid-template-columns:1fr;gap:12px}}
@media(max-width:420px){.grid{gap:10px}}

.panel{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px}
@media(max-width:420px){.panel{border-radius:12px;padding:12px}}
.center{text-align:center}
h1,h2,h3,p{margin:0 0 8px} h1{font-size:24px} .muted{color:var(--muted)}

/* === Zona de raspaditas (4 tarjetas) === */
.scratch-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
@media(max-width:900px){.scratch-grid{grid-template-columns:repeat(2,1fr);gap:10px}}
@media(max-width:420px){.scratch-grid{grid-template-columns:repeat(2,1fr);gap:8px}}

.ticket{position:relative;border-radius:16px;overflow:hidden;border:2px solid gold;
  background:linear-gradient(135deg,#ffed85,#ff9a3d);box-shadow:var(--shadow);
  aspect-ratio: 1/1; min-height: 160px;}
@media(max-width:820px){.ticket{min-height:140px}}
@media(max-width:420px){.ticket{min-height:120px}}
.ticket canvas{width:100%;height:100%;display:block}

/* Modal de premio */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:100;}
.modal .box{background:linear-gradient(180deg,#102030,#0b0f1e);border-radius:16px;padding:20px;max-width:400px;width:92%;color:#fff;box-shadow:0 10px 30px rgba(0,0,0,.6)}
.modal h2{margin:0 0 10px;font-size:20px;display:flex;align-items:center;gap:6px}
.modal .prize{font-size:22px;font-weight:800;background:linear-gradient(90deg,#ffd166,#ff7a3d);color:#0b0f1e;padding:4px 10px;border-radius:8px}
.modal .actions{display:flex;gap:10px;margin-top:14px}
.modal .actions a{flex:1;text-align:center;padding:12px 14px;border-radius:10px;font-weight:700;color:#0b0f1e;text-decoration:none}
.modal .whatsapp{background:#25D366;color:#0b0f1e}
.modal .enter{background:linear-gradient(90deg,#6c59ff,#00d1ff);color:#0b0f1e}
.modal .close{position:absolute;top:12px;right:12px;cursor:pointer}

.dock{position:fixed;left:0;right:0;bottom:0;z-index:10;background:linear-gradient(180deg, rgba(11,15,30,0) 0%, rgba(11,15,30,.85) 22%, rgba(11,15,30,.95) 100%);
  padding:8px 12px 12px;display:flex;gap:10px;align-items:center}
@media(max-width:420px){.dock{padding:8px 10px 10px;gap:8px}}
.btn{appearance:none;border:none;cursor:pointer;padding:12px 14px;border-radius:12px;font-weight:800;background:linear-gradient(90deg,#6c59ff,#00d1ff);color:#0a0f20;width:100%;
  box-shadow:0 8px 20px rgba(0,0,0,.35)}
@media(max-width:420px){.btn{padding:11px 12px;border-radius:10px}}
.btn.ok{background:#25D366;color:#0b0f1e}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <div class="head">
      <img class="brand" src="img/logo-bet300.svg" alt="BET300" onerror="this.outerHTML='<strong>BET300</strong>'">
      <span class="pill">Promo interactiva</span>
      <span class="pill time">âš¡ Tiempo limitado <span class="count" id="countdown">--:--</span></span>
      <span class="pill sound" id="soundToggle">ðŸ”Š Sonido: <b id="soundState">ON</b></span>
    </div>

    <div class="grid">
      <div class="panel">
        <p>TenÃ©s 1 raspe disponible para elegir <b>una</b> tarjeta.</p>
        <div class="scratch-grid">
          <div class="ticket"><canvas></canvas></div>
          <div class="ticket"><canvas></canvas></div>
          <div class="ticket"><canvas></canvas></div>
          <div class="ticket"><canvas></canvas></div>
        </div>
      </div>
      <div class="panel">
        <div class="center">
          <h2>Rasca y Gana Â· 4 opciones</h2>
          <p class="muted">Los premios se acreditan con tu <b>prÃ³xima carga mÃ­nima</b>.</p>
        </div>
        <div class="promo" id="promoBox">
          <div class="copy">
            <span class="eyebrow">Acceso especial</span>
            <strong>Tiempo limitado.</strong>
            <span class="muted">EntrÃ¡ y participÃ¡ antes de que termine.</span>
          </div>
          <a id="playNow" class="btn play" target="_blank" rel="noopener">ðŸŽ® Entrar a la plataforma</a>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="prizeModal" class="modal" style="display:none">
  <div class="box">
    <div class="close" onclick="closeModal()">âœ–</div>
    <h2>ðŸŽ‰ Â¡Premio obtenido! <span id="prizeValue" class="prize"></span></h2>
    <p id="prizeText"></p>
    <p class="muted" id="prizeCode"></p>
    <div class="actions">
      <a id="claimBtn" class="whatsapp" target="_blank">ðŸ“² Reclamar por WhatsApp</a>
      <a id="enterBtn" class="enter" target="_blank">ðŸŽ® Entrar</a>
    </div>
  </div>
</div>
<script>
// ConfiguraciÃ³n bÃ¡sica
const PRIZES = ["$2000","$3000","$5000","$7000","Upgrade de Bono"];

function sizeCanvas(cv){
  const holder = cv.parentElement;
  const w = holder.clientWidth || 160;
  const h = holder.clientHeight || w;
  const dpr = window.devicePixelRatio || 1;
  cv.width = Math.floor(w*dpr);
  cv.height = Math.floor(h*dpr);
  cv.style.width = w+'px';
  cv.style.height = h+'px';
  const ctx = cv.getContext('2d');
  ctx.setTransform(dpr,0,0,dpr,0,0);
  ctx.fillStyle = '#bbb';
  ctx.fillRect(0,0,w,h);
  ctx.fillStyle = 'rgba(255,255,255,0.4)';
  for(let i=0;i<h;i+=12){ctx.fillRect(0,i,w,6)}
  ctx.fillStyle = '#444';
  ctx.font = "700 16px system-ui";
  ctx.textAlign = "center";
  ctx.fillText("RaspÃ¡ para revelar",w/2,h/2);
}

function initScratch(cv,prize){
  sizeCanvas(cv);
  const ctx=cv.getContext('2d');
  let scratched=0;let revealed=false;
  function scratch(e){
    const rect=cv.getBoundingClientRect();
    const x=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
    const y=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
    ctx.globalCompositeOperation='destination-out';
    ctx.beginPath();ctx.arc(x,y,20,0,Math.PI*2);ctx.fill();
    scratched++;
    if(!revealed && scratched>25){reveal(prize);revealed=true;}
  }
  cv.addEventListener('mousedown',scratch);
  cv.addEventListener('mousemove',e=>{if(e.buttons) scratch(e)});
  cv.addEventListener('touchmove',scratch);
}

function reveal(prize){
  const code=Math.random().toString(36).substring(2,8).toUpperCase();
  document.getElementById('prizeValue').textContent=prize;
  document.getElementById('prizeText').innerHTML=`Â¡Felicitaciones! SumÃ¡s <b>${prize}</b> en tu prÃ³xima carga.`;
  document.getElementById('prizeCode').textContent=`CÃ³digo: ${code} - ${new Date().toLocaleString()}`;
  document.getElementById('prizeModal').style.display='flex';
  document.getElementById('claimBtn').href=`https://wa.me/5491157737173?text=Hola, ganÃ© ${prize} con el cÃ³digo ${code}`;
  document.getElementById('enterBtn').href='https://plataforma.example/inicio';
}

function closeModal(){document.getElementById('prizeModal').style.display='none'}

// Init
const cvs=document.querySelectorAll('.ticket canvas');
let used=false;
cvs.forEach((cv,i)=>{
  initScratch(cv,PRIZES[i%PRIZES.length]);
  cv.addEventListener('mousedown',()=>{if(used)cv.style.pointerEvents='none';else used=true});
  cv.addEventListener('touchstart',()=>{if(used)cv.style.pointerEvents='none';else used=true});
});
</script>
</body>
</html>
